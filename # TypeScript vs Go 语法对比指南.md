# TypeScript vs Go 语法对比指南

本文档对比了 TypeScript 和 Go 语言的核心语法特性，帮助开发者快速在两种语言间切换。

## 1. 变量声明

| 特性          | TypeScript                                                                                | Go                                                                               |
| ------------- | ----------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------- |
| **基本声明**  | `let name: string = "John"`<br>`const age: number = 30`<br>`var isActive: boolean = true` | `var name string = "John"`<br>`const age int = 30`<br>`var isActive bool = true` |
| **类型推断**  | `let count = 42 // number`<br>`const message = "Hello" // string`                         | `count := 42`<br>`message := "Hello"`                                            |
| **可选/空值** | `let optional?: string`<br>`let nullable: string \| null = null`                          | `var optional string // 默认为 ""`<br>`var ptr *string // 默认为 nil`            |
| **作用域**    | 块级作用域 (let/const)<br>函数作用域 (var)                                                | 包级、函数级、块级作用域                                                         |
| **注意点**    | 支持 `let`/`const`/`var`<br>可选类型用 `?`，联合类型用 `\|`                               | 使用 `var`/`const`，`:=` 是短变量声明<br>指针类型用 `*`，零值是类型的默认值      |

## 2. 数据类型

| 类型            | TypeScript                                                                                        | Go                                                                                                                                                  |
| --------------- | ------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| **基本类型**    | `boolean`, `number`, `string`, `bigint`, `symbol`                                                 | `bool`, `int`, `int8`, `int16`, `int32`, `int64`<br>`uint`, `uint8`, `uint16`, `uint32`, `uint64`<br>`float32`, `float64`, `string`, `byte`, `rune` |
| **字符串**      | `const name: string = "John"`<br>`const template = \`Hello ${name}\``                             | `var name string = "John"`<br>`var template string = fmt.Sprintf("Hello %s", name)`                                                                 |
| **数字**        | `const age: number = 30`<br>`const big: bigint = 123n`                                            | `var age int = 30`<br>`var price float64 = 99.99`<br>`var id uint64 = 123456789`                                                                    |
| **布尔值**      | `const isActive: boolean = true`                                                                  | `var isActive bool = true`                                                                                                                          |
| **数组/切片**   | `const arr: number[] = [1, 2, 3]`<br>`const arr2: Array<string> = ["a", "b"]`                     | `var arr [3]int = [3]int{1, 2, 3} // 数组`<br>`var slice []string = []string{"a", "b"} // 切片`                                                     |
| **对象/结构体** | `const user: {name: string, age: number} = {`<br>`  name: "John", age: 30`<br>`}`                 | `type User struct {`<br>`  Name string`<br>`  Age  int`<br>`}`<br>`user := User{Name: "John", Age: 30}`                                             |
| **空值**        | `null`, `undefined`                                                                               | `nil` (仅用于指针、切片、映射、通道、函数)                                                                                                          |
| **联合类型**    | `type Status = "active" \| "inactive"`<br>`const status: string \| number = "active"`             | 不支持联合类型，使用接口或枚举<br>`type Status int`<br>`const (Active Status = iota; Inactive)`                                                     |
| **枚举**        | `enum Color { Red, Green, Blue }`<br>`const color: Color = Color.Red`                             | `type Color int`<br>`const (`<br>`  Red Color = iota`<br>`  Green`<br>`  Blue`<br>`)`                                                               |
| **接口**        | `interface Drawable {`<br>`  draw(): void;`<br>`}`                                                | `type Drawable interface {`<br>`  Draw() error`<br>`}`                                                                                              |
| **函数类型**    | `type Handler = (req: Request) => Response`<br>`const handler: Handler = (req) => ({ ok: true })` | `type Handler func(req Request) Response`<br>`var handler Handler = func(req Request) Response {`<br>`  return Response{OK: true}`<br>`}`           |
| **泛型**        | `interface Box<T> { value: T }`<br>`const box: Box<string> = { value: "hello" }`                  | `type Box[T any] struct { Value T }`<br>`var box Box[string] = Box[string]{Value: "hello"}`                                                         |
| **元组**        | `type Point = [number, number]`<br>`const point: Point = [10, 20]`                                | 不支持，使用结构体<br>`type Point struct { X, Y int }`<br>`point := Point{X: 10, Y: 20}`                                                            |
| **字面量类型**  | `type Theme = "light" \| "dark"`<br>`const theme: Theme = "light"`                                | 使用常量<br>`type Theme string`<br>`const (Light Theme = "light"; Dark Theme = "dark")`                                                             |
| **可选类型**    | `interface User {`<br>`  name: string;`<br>`  email?: string;`<br>`}`                             | 使用指针表示可选<br>`type User struct {`<br>`  Name  string`<br>`  Email *string`<br>`}`                                                            |
| **类型别名**    | `type UserID = string`<br>`type EventHandler = (event: Event) => void`                            | `type UserID string`<br>`type EventHandler func(event Event)`                                                                                       |
| **映射/字典**   | `const scores: Record<string, number> = {}`<br>`const map = new Map<string, number>()`            | `var scores map[string]int = make(map[string]int)`<br>`scores := map[string]int{"alice": 100}`                                                      |
| **任意类型**    | `any`, `unknown`                                                                                  | `interface{}` (Go 1.18+ 使用 `any`)                                                                                                                 |
| **从不返回**    | `never`                                                                                           | 不支持，函数必须有返回或 panic                                                                                                                      |
| **类型断言**    | `const value = unknown as string`<br>`const value = <string>unknown`                              | `value, ok := interface{}.(string)`<br>`value := interface{}.(string) // panic if wrong`                                                            |
| **类型守卫**    | `function isString(x: any): x is string {`<br>`  return typeof x === "string";`<br>`}`            | `func isString(x interface{}) bool {`<br>`  _, ok := x.(string)`<br>`  return ok`<br>`}`                                                            |

## 3. 类型判断

| 特性                | TypeScript                                                                                                                                                                                                                       | Go                                                                                                                                                                                                                                                    |
| ------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **typeof 操作符**   | `typeof value === "string"`<br>`typeof value === "number"`<br>`typeof value === "boolean"`<br>`typeof value === "object"`<br>`typeof value === "function"`<br>`typeof value === "undefined"`                                     | 不支持 typeof，使用反射<br>`reflect.TypeOf(value).Kind() == reflect.String`<br>`reflect.TypeOf(value).Kind() == reflect.Int`                                                                                                                          |
| **instanceof 检查** | `value instanceof Array`<br>`value instanceof Date`<br>`value instanceof Error`<br>`obj instanceof MyClass`                                                                                                                      | 不支持 instanceof，使用类型断言<br>`_, ok := value.([]int)`<br>`_, ok := value.(time.Time)`<br>`_, ok := value.(error)`                                                                                                                               |
| **类型断言**        | `const str = value as string`<br>`const num = <number>value`<br>`const obj = value as MyInterface`                                                                                                                               | `str := value.(string) // panic if wrong`<br>`str, ok := value.(string) // safe`<br>`if str, ok := value.(string); ok { ... }`                                                                                                                        |
| **类型守卫函数**    | `function isNumber(x: any): x is number {`<br>`  return typeof x === "number";`<br>`}`<br>`if (isNumber(value)) {`<br>`  // value 现在是 number 类型`<br>`}`                                                                     | `func isNumber(x interface{}) bool {`<br>`  _, ok := x.(int) // 或其他数字类型`<br>`  return ok`<br>`}`<br>`if isNumber(value) {`<br>`  num := value.(int)`<br>`}`                                                                                    |
| **in 操作符**       | `if ("property" in object) {`<br>`  // 属性存在`<br>`}`<br>`if ("length" in value) {`<br>`  // 有 length 属性`<br>`}`                                                                                                            | 不支持 in，检查结构体字段或 map 键<br>`if _, exists := m["key"]; exists {`<br>`  // map 中存在 key`<br>`}`                                                                                                                                            |
| **Array.isArray()** | `if (Array.isArray(value)) {`<br>`  // value 是数组`<br>`  value.forEach(item => ...)`<br>`}`                                                                                                                                    | `if reflect.TypeOf(value).Kind() == reflect.Slice {`<br>`  // value 是切片`<br>`}`                                                                                                                                                                    |
| **空值检查**        | `if (value != null) { ... }`<br>`if (value !== undefined) { ... }`<br>`if (value != null && value !== undefined) { ... }`                                                                                                        | `if value != nil { ... }`<br>`// Go 中 nil 仅适用于指针、切片、映射、通道、函数`                                                                                                                                                                      |
| **可选链**          | `const result = obj?.property?.method?.()`<br>`const item = array?.[index]`                                                                                                                                                      | 不支持，需要逐步检查<br>`if obj != nil && obj.Property != nil {`<br>`  result := obj.Property.Method()`<br>`}`                                                                                                                                        |
| **空值合并**        | `const result = value ?? defaultValue`<br>`const name = user?.name ?? "Anonymous"`                                                                                                                                               | 不支持，使用 if 语句<br>`result := value`<br>`if result == nil {`<br>`  result = defaultValue`<br>`}`                                                                                                                                                 |
| **switch 类型判断** | `switch (typeof value) {`<br>`  case "string": /* 字符串 */ break;`<br>`  case "number": /* 数字 */ break;`<br>`  default: /* 其他 */ break;`<br>`}`                                                                             | `switch v := value.(type) {`<br>`case string:`<br>`  // v 是 string 类型`<br>`case int:`<br>`  // v 是 int 类型`<br>`default:`<br>`  // 其他类型`<br>`}`                                                                                              |
| **联合类型收窄**    | `function handle(value: string \| number) {`<br>`  if (typeof value === "string") {`<br>`    // value 现在是 string`<br>`    return value.toUpperCase();`<br>`  }`<br>`  // value 现在是 number`<br>`  return value * 2;`<br>`}` | Go 没有联合类型，使用 interface{}<br>`func handle(value interface{}) interface{} {`<br>`  switch v := value.(type) {`<br>`  case string:`<br>`    return strings.ToUpper(v)`<br>`  case int:`<br>`    return v * 2`<br>`  }`<br>`  return nil`<br>`}` |
| **自定义类型判断**  | `const isUser = (obj: any): obj is User => {`<br>`  return obj && typeof obj.name === "string"`<br>`    && typeof obj.age === "number";`<br>`}`                                                                                  | `func isUser(obj interface{}) bool {`<br>`  u, ok := obj.(User)`<br>`  return ok && u.Name != "" && u.Age > 0`<br>`}`                                                                                                                                 |
| **反射检查**        | `// 通过 Reflect API`<br>`const hasMethod = Reflect.has(obj, "methodName")`<br>`const type = Reflect.getPrototypeOf(obj)`                                                                                                        | `import "reflect"`<br>`val := reflect.ValueOf(obj)`<br>`typ := reflect.TypeOf(obj)`<br>`hasMethod := typ.Method(0).Name == "MethodName"`                                                                                                              |

## 3. 函数定义

| 特性           | TypeScript                                                                                                                                                            | Go                                                                                                                                                                                          |
| -------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **基本函数**   | `function add(a: number, b: number): number {`<br>`  return a + b;`<br>`}`                                                                                            | `func add(a, b int) int {`<br>`  return a + b`<br>`}`                                                                                                                                       |
| **箭头函数**   | `const multiply = (a: number, b: number): number => a * b`                                                                                                            | 不支持，只有函数字面量<br>`add := func(a, b int) int { return a + b }`                                                                                                                      |
| **多返回值**   | 不支持，使用元组或对象<br>`function divide(a: number, b: number): [number, string?] {`<br>`  return b === 0 ? [0, "error"] : [a / b];`<br>`}`                         | `func divide(a, b int) (int, error) {`<br>`  if b == 0 {`<br>`    return 0, errors.New("division by zero")`<br>`  }`<br>`  return a / b, nil`<br>`}`                                        |
| **可选参数**   | `function greet(name: string, age?: number): string`<br>`function welcome(name: string = "Guest"): string`                                                            | 不支持，通常用结构体或多个函数<br>`func greet(name string) string`<br>`func greetWithAge(name string, age int) string`                                                                      |
| **可变参数**   | `function sum(...numbers: number[]): number {`<br>`  return numbers.reduce((a, b) => a + b, 0);`<br>`}`                                                               | `func sum(numbers ...int) int {`<br>`  total := 0`<br>`  for _, num := range numbers {`<br>`    total += num`<br>`  }`<br>`  return total`<br>`}`                                           |
| **函数重载**   | `function format(value: string): string;`<br>`function format(value: number): string;`<br>`function format(value: any): string {`<br>`  return String(value);`<br>`}` | 不支持，需要不同函数名<br>`func FormatString(s string) string`<br>`func FormatInt(i int) string`                                                                                            |
| **命名返回值** | 不支持                                                                                                                                                                | `func calculate(a, b int) (sum, product int) {`<br>`  sum = a + b`<br>`  product = a * b`<br>`  return // 裸返回`<br>`}`                                                                    |
| **高阶函数**   | `function map<T, U>(arr: T[], fn: (item: T) => U): U[]`<br>`const doubled = map([1, 2, 3], x => x * 2)`                                                               | `func Map[T, U any](slice []T, fn func(T) U) []U {`<br>`  result := make([]U, len(slice))`<br>`  for i, v := range slice {`<br>`    result[i] = fn(v)`<br>`  }`<br>`  return result`<br>`}` |
| **闭包**       | `function outer(x: number) {`<br>`  return function(y: number) {`<br>`    return x + y;`<br>`  };`<br>`}`                                                             | `func outer(x int) func(int) int {`<br>`  return func(y int) int {`<br>`    return x + y`<br>`  }`<br>`}`                                                                                   |

## 4. 错误处理

| 特性           | TypeScript                                                                                                                                    | Go                                                                                                                                                        |
| -------------- | --------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **异常处理**   | `try {`<br>`  const result = riskyOperation();`<br>`} catch (error) {`<br>`  console.error(error);`<br>`} finally {`<br>`  cleanup();`<br>`}` | 不使用异常，使用错误返回值                                                                                                                                |
| **错误返回**   | 通过 Promise rejection 或抛出异常                                                                                                             | `func riskyOperation() (string, error) {`<br>`  if someCondition {`<br>`    return "", errors.New("failed")`<br>`  }`<br>`  return "success", nil`<br>`}` |
| **错误检查**   | 在 catch 块中处理                                                                                                                             | `result, err := riskyOperation()`<br>`if err != nil {`<br>`  log.Printf("Error: %v", err)`<br>`  return`<br>`}`                                           |
| **自定义错误** | `class ValidationError extends Error {`<br>`  constructor(message: string, public field: string) {`<br>`    super(message);`<br>`  }`<br>`}`  | `type ValidationError struct {`<br>`  Field, Message string`<br>`}`<br>`func (e *ValidationError) Error() string {`<br>`  return e.Message`<br>`}`        |
| **异步错误**   | `async/await` + `try/catch`                                                                                                                   | 每个异步操作都要检查错误                                                                                                                                  |
| **错误包装**   | 不常见                                                                                                                                        | `return fmt.Errorf("failed: %w", err)`                                                                                                                    |

## 5. 并发处理

| 特性             | TypeScript                                                                                                    | Go                                                                                       |
| ---------------- | ------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------- |
| **并发模型**     | 基于 Promise 的异步模型<br>单线程事件循环                                                                     | 基于 goroutine 和 channel<br>真正的并行执行                                              |
| **启动并发**     | `Promise.all([`<br>`  fetch("/api/data1"),`<br>`  fetch("/api/data2"),`<br>`  fetch("/api/data3")`<br>`])`    | `go func() { /* 并发执行 */ }()`<br>`go processData(data)`                               |
| **等待完成**     | `await Promise.all(promises)`<br>`await Promise.allSettled(promises)`                                         | `var wg sync.WaitGroup`<br>`wg.Add(1); defer wg.Done()`<br>`wg.Wait()`                   |
| **通信机制**     | 回调、Promise、async/await                                                                                    | `ch := make(chan string)`<br>`ch <- "data" // 发送`<br>`data := <-ch // 接收`            |
| **异步语法**     | `async function fetchData() {`<br>`  const result = await fetch("/api");`<br>`  return result.json();`<br>`}` | 无特殊语法，goroutine 是同步的                                                           |
| **Worker 线程**  | `const worker = new Worker('worker.js')`<br>`worker.postMessage(data)`                                        | goroutine 轻量级，可启动数千个                                                           |
| **Channel 操作** | 不支持                                                                                                        | `select {`<br>`case data := <-ch1:`<br>`case ch2 <- result:`<br>`case <-timeout:`<br>`}` |

## 6. 内存管理

| 特性         | TypeScript                                                | Go                                                                                                          |
| ------------ | --------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------- |
| **垃圾回收** | 完全自动，依赖 V8 引擎                                    | 自动 GC + 可手动优化                                                                                        |
| **内存分配** | 无直接控制                                                | 栈分配（值类型）<br>堆分配（指针、切片等）                                                                  |
| **指针**     | 不支持真正的指针                                          | `ptr := &value // 取地址`<br>`val := *ptr   // 解引用`                                                      |
| **弱引用**   | `const cache = new WeakMap()`<br>`cache.set(obj, "data")` | 不支持弱引用                                                                                                |
| **对象复用** | 手动管理对象池                                            | `var pool = sync.Pool{`<br>`  New: func() interface{} {`<br>`    return make([]byte, 1024)`<br>`  }`<br>`}` |
| **内存泄漏** | 闭包引用、事件监听器未清理                                | goroutine 泄漏、循环引用                                                                                    |
| **手动 GC**  | 不支持                                                    | `runtime.GC() // 手动触发`                                                                                  |

## 7. 包管理和模块系统

| 特性         | TypeScript                                                                                                                     | Go                                                                                                                            |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------- |
| **导入语法** | `import { User, UserService } from './user'`<br>`import DefaultExport from './user'`<br>`import * as UserModule from './user'` | `import (`<br>`  "fmt"`<br>`  "github.com/example/project/user"`<br>`  alias "github.com/external/lib"`<br>`)`                |
| **导出语法** | `export interface User { }`<br>`export class UserService { }`<br>`export default class Main { }`                               | 首字母大写自动导出<br>`type User struct { }  // 导出`<br>`func NewUser() { }    // 导出`<br>`func helper() { }     // 未导出` |
| **包声明**   | 文件级别，无包声明                                                                                                             | `package user // 包声明`                                                                                                      |
| **包管理器** | npm, yarn, pnpm                                                                                                                | `go mod init project`<br>`go get github.com/pkg/errors`                                                                       |
| **动态导入** | `const module = await import('./lazy')`<br>支持代码分割                                                                        | 编译时静态链接<br>不支持动态导入                                                                                              |
| **包初始化** | 模块加载时执行顶层代码                                                                                                         | `func init() {`<br>`  // 包加载时执行`<br>`}`                                                                                 |
| **别名**     | `import { User as UserType } from './user'`                                                                                    | `import alias "package/path"`                                                                                                 |

## 8. 测试

| 特性             | TypeScript                                                                                                                                     | Go                                                                                                                                                                            |
| ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **测试框架**     | Jest, Mocha, Vitest 等第三方框架                                                                                                               | 内置 `testing` 包                                                                                                                                                             |
| **测试文件**     | `*.test.ts` 或 `*.spec.ts`                                                                                                                     | `*_test.go`                                                                                                                                                                   |
| **基本测试**     | `describe('UserService', () => {`<br>`  test('should create user', async () => {`<br>`    expect(user.name).toBe('John');`<br>`  });`<br>`});` | `func TestCreateUser(t *testing.T) {`<br>`  user := CreateUser("John")`<br>`  if user.Name != "John" {`<br>`    t.Errorf("Expected John, got %s", user.Name)`<br>`  }`<br>`}` |
| **异步测试**     | `test('async test', async () => {`<br>`  const result = await fetchData();`<br>`  expect(result).toBe('data');`<br>`});`                       | 同步测试，异步用 goroutine + channel                                                                                                                                          |
| **Mock**         | `jest.mock('./database')`<br>`const mockSave = jest.fn()`                                                                                      | 使用接口 + 手动 Mock 实现<br>或第三方库如 testify                                                                                                                             |
| **表格驱动测试** | 不是惯用模式                                                                                                                                   | `tests := []struct{`<br>`  name string; input int; want int`<br>`}{{"case1", 1, 2}, {"case2", 2, 4}}`<br>`for _, tt := range tests { ... }`                                   |
| **基准测试**     | 需要第三方工具                                                                                                                                 | `func BenchmarkFunction(b *testing.B) {`<br>`  for i := 0; i < b.N; i++ { ... }`<br>`}`                                                                                       |
| **运行测试**     | `npm test` 或 `yarn test`                                                                                                                      | `go test ./...`                                                                                                                                                               |

## 9. 数据结构

| 特性           | TypeScript                                                                     | Go                                                                           |
| -------------- | ------------------------------------------------------------------------------ | ---------------------------------------------------------------------------- |
| **数组**       | `const arr: number[] = [1, 2, 3]`<br>`const arr2: Array<string> = ["a", "b"]`  | `var arr [3]int = [3]int{1, 2, 3}`<br>`arr := [...]int{1, 2, 3} // 自动长度` |
| **切片**       | 数组是动态的                                                                   | `var slice []int = []int{1, 2, 3}`<br>`slice = append(slice, 4)`             |
| **映射/字典**  | `const map = new Map<string, number>()`<br>`const obj = { key: "value" }`      | `var m map[string]int = make(map[string]int)`<br>`m["key"] = 42`             |
| **集合**       | `const set = new Set<string>()`<br>`set.add("item")`                           | 使用 map 模拟：`map[string]bool`                                             |
| **元组**       | `const tuple: [string, number] = ["hello", 42]`                                | 不支持，使用结构体                                                           |
| **解构赋值**   | `const [a, b] = [1, 2]`<br>`const {name, age} = user`                          | 不支持，需要显式赋值                                                         |
| **扩展运算符** | `const newArr = [...oldArr, newItem]`<br>`const newObj = {...oldObj, newProp}` | 使用 `append()` 或手动复制                                                   |

## 10. 控制流

| 特性           | TypeScript                                                                                               | Go                                                                                                         |
| -------------- | -------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| **条件语句**   | `if (condition) { }`<br>`if (condition) { } else if { } else { }`                                        | `if condition { }`<br>`if condition { } else if { } else { }`                                              |
| **三元运算符** | `const result = condition ? "yes" : "no"`                                                                | 不支持，使用 if 语句                                                                                       |
| **Switch**     | `switch (value) {`<br>`  case "a": break;`<br>`  default: break;`<br>`}`                                 | `switch value {`<br>`case "a":`<br>`  // 自动 break`<br>`default:`<br>`}`                                  |
| **循环**       | `for (let i = 0; i < 10; i++) { }`<br>`for (const item of array) { }`<br>`for (const key in object) { }` | `for i := 0; i < 10; i++ { }`<br>`for index, item := range slice { }`<br>`for key, value := range map { }` |
| **While 循环** | `while (condition) { }`<br>`do { } while (condition)`                                                    | `for condition { } // while`<br>`for { } // 无限循环`                                                      |
| **标签跳转**   | `break label; continue label;`                                                                           | `break label; continue label;`<br>`goto label`                                                             |

## 总结对比表

| 特性         | TypeScript                         | Go                                          |
| ------------ | ---------------------------------- | ------------------------------------------- |
| **类型系统** | 静态类型 + 类型推断<br>结构化类型  | 静态强类型<br>标称类型                      |
| **编译**     | 转译为 JavaScript                  | 编译为机器码                                |
| **运行时**   | V8/Node.js/浏览器                  | 独立运行时                                  |
| **性能**     | 中等（解释执行）                   | 高（编译执行）                              |
| **并发**     | 异步/Promise/单线程                | Goroutine/Channel/多线程                    |
| **内存管理** | 自动垃圾回收                       | 自动 GC + 手动优化                          |
| **错误处理** | try/catch 异常机制                 | 显式错误返回值                              |
| **面向对象** | 类、接口、继承                     | 结构体、接口、组合                          |
| **包管理**   | npm/yarn + package.json            | go mod + go.mod                             |
| **学习曲线** | 中等（需要 JS 基础）               | 简单（语法简洁）                            |
| **生态系统** | 庞大（npm 生态）                   | 快速增长，标准库丰富                        |
| **适用场景** | Web 开发、前端应用<br>Node.js 后端 | 系统编程、微服务<br>高性能后端、DevOps 工具 |

## 选择建议

**选择 TypeScript 如果:**

- 需要 Web 前端开发
- 团队熟悉 JavaScript 生态
- 需要快速原型开发
- 项目需要丰富的第三方库

**选择 Go 如果:**

- 需要高性能后端服务
- 系统编程或网络编程
- 微服务架构
- 需要简单、可靠的并发处理
- 团队偏好简洁的语法

## 11. 常用标准库和 API

| 功能           | TypeScript                                                                                                                                                                                                                | Go                                                                                                                                                                                                                                                     |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **字符串处理** | `"hello".toUpperCase()`<br>`"hello".toLowerCase()`<br>`"hello world".split(" ")`<br>`"hello".includes("ell")`<br>`"hello".startsWith("he")`<br>`"hello".endsWith("lo")`<br>`"  hello  ".trim()`                           | `strings.ToUpper("hello")`<br>`strings.ToLower("hello")`<br>`strings.Split("hello world", " ")`<br>`strings.Contains("hello", "ell")`<br>`strings.HasPrefix("hello", "he")`<br>`strings.HasSuffix("hello", "lo")`<br>`strings.TrimSpace("  hello  ")`  |
| **数组操作**   | `arr.push(item)`<br>`arr.pop()`<br>`arr.shift()`<br>`arr.unshift(item)`<br>`arr.slice(1, 3)`<br>`arr.splice(1, 2)`<br>`arr.concat(other)`                                                                                 | `slice = append(slice, item)`<br>`slice = slice[:len(slice)-1] // pop`<br>`slice = slice[1:] // shift`<br>`slice = append([]T{item}, slice...) // unshift`<br>`slice[1:3]`<br>`// 需要手动实现 splice`<br>`append(slice, other...)`                    |
| **数组遍历**   | `arr.forEach(item => console.log(item))`<br>`arr.map(x => x * 2)`<br>`arr.filter(x => x > 5)`<br>`arr.reduce((sum, x) => sum + x, 0)`<br>`arr.find(x => x.id === 1)`<br>`arr.some(x => x > 5)`<br>`arr.every(x => x > 0)` | `for _, item := range slice { fmt.Println(item) }`<br>`// map 需要手动实现或使用泛型`<br>`// filter 需要手动实现`<br>`// reduce 需要手动实现`<br>`// find 需要手动循环`<br>`// 需要手动实现 some/every`                                                |
| **JSON 处理**  | `JSON.stringify(obj)`<br>`JSON.parse(jsonString)`<br>`JSON.stringify(obj, null, 2) // 格式化`                                                                                                                             | `import "encoding/json"`<br>`json.Marshal(obj)`<br>`json.Unmarshal([]byte(jsonString), &obj)`<br>`json.MarshalIndent(obj, "", "  ")`                                                                                                                   |
| **时间处理**   | `new Date()`<br>`Date.now()`<br>`date.getFullYear()`<br>`date.getMonth()`<br>`date.toISOString()`<br>`date.getTime()`                                                                                                     | `import "time"`<br>`time.Now()`<br>`time.Now().Unix()`<br>`time.Now().Year()`<br>`time.Now().Month()`<br>`time.Now().Format(time.RFC3339)`<br>`time.Now().UnixMilli()`                                                                                 |
| **HTTP 请求**  | `fetch("/api/data")`<br>`fetch("/api", { method: "POST", body: JSON.stringify(data) })`<br>`axios.get("/api/data")`<br>`axios.post("/api", data)`                                                                         | `import "net/http"`<br>`http.Get("http://example.com/api")`<br>`http.Post("http://example.com/api", "application/json", body)`<br>`// 或使用第三方库如 resty`                                                                                          |
| **文件操作**   | `import fs from "fs"`<br>`fs.readFileSync("file.txt", "utf8")`<br>`fs.writeFileSync("file.txt", data)`<br>`fs.existsSync("file.txt")`<br>`fs.mkdirSync("dir", { recursive: true })`                                       | `import ("io/ioutil"; "os")`<br>`ioutil.ReadFile("file.txt")`<br>`ioutil.WriteFile("file.txt", data, 0644)`<br>`_, err := os.Stat("file.txt"); !os.IsNotExist(err)`<br>`os.MkdirAll("dir", 0755)`                                                      |
| **路径处理**   | `import path from "path"`<br>`path.join("dir", "file.txt")`<br>`path.extname("file.txt")`<br>`path.basename("dir/file.txt")`<br>`path.dirname("dir/file.txt")`                                                            | `import "path/filepath"`<br>`filepath.Join("dir", "file.txt")`<br>`filepath.Ext("file.txt")`<br>`filepath.Base("dir/file.txt")`<br>`filepath.Dir("dir/file.txt")`                                                                                      |
| **URL 处理**   | `new URL("https://example.com/path?q=1")`<br>`url.hostname`<br>`url.pathname`<br>`url.searchParams.get("q")`<br>`encodeURIComponent(str)`                                                                                 | `import "net/url"`<br>`url.Parse("https://example.com/path?q=1")`<br>`parsedURL.Host`<br>`parsedURL.Path`<br>`parsedURL.Query().Get("q")`<br>`url.QueryEscape(str)`                                                                                    |
| **正则表达式** | `const regex = /pattern/gi`<br>`regex.test(str)`<br>`str.match(regex)`<br>`str.replace(regex, "replacement")`<br>`str.split(regex)`                                                                                       | `import "regexp"`<br>`regex := regexp.MustCompile(\`pattern\`)`<br>`regex.MatchString(str)`<br>`regex.FindAllString(str, -1)`<br>`regex.ReplaceAllString(str, "replacement")`<br>`regex.Split(str, -1)`                                                |
| **加密/哈希**  | `import crypto from "crypto"`<br>`crypto.createHash("sha256").update(data).digest("hex")`<br>`crypto.randomBytes(16).toString("hex")`<br>`btoa(str) // base64 encode`<br>`atob(str) // base64 decode`                     | `import ("crypto/sha256"; "crypto/rand"; "encoding/base64")`<br>`hash := sha256.Sum256([]byte(data))`<br>`fmt.Sprintf("%x", hash)`<br>`rand.Read(bytes)`<br>`base64.StdEncoding.EncodeToString([]byte(str))`<br>`base64.StdEncoding.DecodeString(str)` |
| **环境变量**   | `process.env.NODE_ENV`<br>`process.env.PORT ?? "3000"`                                                                                                                                                                    | `import "os"`<br>`os.Getenv("GO_ENV")`<br>`port := os.Getenv("PORT"); if port == "" { port = "3000" }`                                                                                                                                                 |
| **命令行参数** | `process.argv.slice(2)`<br>`// 或使用 commander.js, yargs`                                                                                                                                                                | `import "os"`<br>`os.Args[1:] // 跳过程序名`<br>`// 或使用 flag 包`<br>`import "flag"`<br>`flag.String("name", "default", "help")`                                                                                                                     |
| **数学运算**   | `Math.max(1, 2, 3)`<br>`Math.min(1, 2, 3)`<br>`Math.random()`<br>`Math.floor(3.7)`<br>`Math.ceil(3.2)`<br>`Math.round(3.5)`<br>`Math.pow(2, 3)`                                                                           | `import "math"`<br>`math.Max(1, 2) // 只接受两个参数`<br>`math.Min(1, 2)`<br>`rand.Float64() // 需要 import "math/rand"`<br>`math.Floor(3.7)`<br>`math.Ceil(3.2)`<br>`math.Round(3.5)`<br>`math.Pow(2, 3)`                                             |
| **类型转换**   | `String(123)`<br>`Number("123")`<br>`Boolean(1)`<br>`parseInt("123", 10)`<br>`parseFloat("123.45")`                                                                                                                       | `import "strconv"`<br>`strconv.Itoa(123)`<br>`strconv.Atoi("123")`<br>`// bool 转换较复杂`<br>`strconv.ParseInt("123", 10, 64)`<br>`strconv.ParseFloat("123.45", 64)`                                                                                  |
| **并发控制**   | `Promise.race([promise1, promise2])`<br>`Promise.allSettled([promise1, promise2])`<br>`await Promise.all([p1, p2, p3])`                                                                                                   | `import "sync"`<br>`// 使用 channel 和 select`<br>`select { case <-ch1: case <-ch2: }`<br>`var wg sync.WaitGroup`<br>`// 等待所有 goroutine 完成`                                                                                                      |
| **定时器**     | `setTimeout(() => {}, 1000)`<br>`setInterval(() => {}, 1000)`<br>`clearTimeout(timer)`<br>`clearInterval(timer)`                                                                                                          | `import "time"`<br>`time.AfterFunc(time.Second, func() {})`<br>`ticker := time.NewTicker(time.Second)`<br>`timer.Stop()`<br>`ticker.Stop()`                                                                                                            |

## 12. 第三方生态对比

| 功能领域        | TypeScript 生态                                                            | Go 生态                                                     |
| --------------- | -------------------------------------------------------------------------- | ----------------------------------------------------------- |
| **Web 框架**    | Express.js, Koa, Fastify<br>Next.js, Nuxt.js, SvelteKit<br>NestJS (企业级) | Gin, Echo, Fiber<br>Chi, Gorilla Mux<br>Buffalo, Beego      |
| **ORM/数据库**  | Prisma, TypeORM, Sequelize<br>Mongoose (MongoDB)<br>Drizzle ORM            | GORM, Ent, SQLBoiler<br>Mongo Go Driver<br>PgX (PostgreSQL) |
| **测试框架**    | Jest, Vitest, Mocha<br>Cypress, Playwright<br>Storybook                    | 内置 testing<br>Testify, Ginkgo<br>GoConvey                 |
| **构建工具**    | Webpack, Vite, Rollup<br>ESBuild, SWC<br>Parcel                            | 内置 go build<br>GoReleaser<br>Mage (构建工具)              |
| **包管理**      | npm, yarn, pnpm<br>package.json<br>node_modules                            | go mod (内置)<br>go.mod, go.sum<br>vendor 目录              |
| **API 文档**    | Swagger, OpenAPI<br>TypeDoc<br>JSDoc                                       | Swagger/OpenAPI<br>godoc (内置)<br>go-swagger               |
| **日志库**      | Winston, Pino<br>Console.log<br>Debug                                      | Logrus, Zap<br>标准 log 包<br>Zerolog                       |
| **配置管理**    | dotenv, config<br>环境变量<br>JSON/YAML 解析                               | Viper, envconfig<br>标准库支持<br>内置 flag 包              |
| **监控/性能**   | New Relic, DataDog<br>Sentry, LogRocket<br>Performance API                 | Prometheus, Grafana<br>OpenTelemetry<br>内置 pprof          |
| **部署/DevOps** | Docker, Kubernetes<br>Vercel, Netlify<br>PM2, Forever                      | Docker, Kubernetes<br>原生二进制部署<br>Systemd 服务        |
